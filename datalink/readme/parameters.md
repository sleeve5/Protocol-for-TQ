

# Proximity-1 仿真系统参数

本手册涵盖了从底层数学构造到顶层协议控制的所有关键参数配置。所有参数均基于 **CCSDS 211.0/211.2** 标准及 **LISA 17万公里** 任务场景设定。

## 1. 核心数学构造参数 (Core Mathematical Parameters)

这部分定义了编解码和校验的底层逻辑，**必须**与标准完全一致，否则无法互通。

### 1.1 LDPC 校验矩阵构造 (CCSDS C2 Family)

| 参数名        | 符号         | 取值                     | 描述与标准依据                                                                      |
|:---------- |:---------- |:---------------------- |:---------------------------------------------------------------------------- |
| **码族**     | -          | **CCSDS C2**           | 适用于近地/邻近链路的准循环 (QC-LDPC) 码。                                                  |
| **码率**     | $R$        | **1/2**                | 编码效率。$R = k/n$。                                                              |
| **信息长度**   | $k$        | **1024 bits**          | 输入数据块长度。                                                                     |
| **子矩阵大小**  | $M$        | **512**                | 构造矩阵的基本单元尺寸。$k = 2M$。                                                        |
| **基矩阵结构**  | $H_{base}$ | **3 $\times$ 5**       | 校验矩阵由 3 行 5 列的 $M \times M$ 子块组成。                                            |
| **置换算法**   | $\Pi_k$    | **代数置换**               | 非简单循环移位。第 $k$ 个置换矩阵的偏移量由 $\theta_k$ 和 $\phi_k$ 查表计算 (CCSDS 131.0 Table 7-3)。 |
| **生成矩阵尺寸** | $G$        | **1024 $\times$ 2560** | 编码器输出的原始长度。                                                                  |
| **打孔模式**   | -          | **最后 512 位**           | 标准规定丢弃最后 $M$ 位校验位。传输长度 $n = 2560 - 512 = 2048$。                              |

### 1.2 CRC-32 校验参数

| 参数名        | 取值 / 公式                                              | 描述                     |
|:---------- |:---------------------------------------------------- |:---------------------- |
| **生成多项式**  | $G(x) = x^{32} + x^{23} + x^{21} + x^{11} + x^2 + 1$ | 稀疏多项式，适合硬件实现。          |
| **十六进制表示** | **`0x00A00805`**                                     | 多项式系数的 Hex 表示。         |
| **初始状态**   | **全 0** (`0x00000000`)                               | 不同于以太网的全 1。            |
| **结果处理**   | **不取反** (Direct)                                     | 计算结果直接输出，不进行 XOR 掩码操作。 |
| **位序**     | **MSB First**                                        | 大端序传输。                 |

### 1.3 伪随机化 (Pseudo-Randomizer)

| 参数名       | 取值 / 公式                                      | 描述                                 |
|:--------- |:-------------------------------------------- |:---------------------------------- |
| **生成多项式** | $h(x) = x^8 + x^6 + x^4 + x^3 + x^2 + x + 1$ | 用于生成加扰序列。                          |
| **序列长度**  | **255 bits**                                 | 循环周期。                              |
| **初始状态**  | **全 1** (`0xFF`)                             | 每个 LDPC 码块开始时复位。                   |
| **应用范围**  | **LDPC 码字**                                  | 仅对 LDPC 码块（含校验位）加扰，**不** 对 CSM 加扰。 |

### 1.4 同步标志 (Markers)

| 标志名     | 值 (Hex)                  | 长度      | 作用                         |
|:------- |:------------------------ |:------- |:-------------------------- |
| **ASM** | **`0xFAF320`**           | 24 bits | 传送帧（Transfer Frame）的定界符。   |
| **CSM** | **`0x034776C7272895B0`** | 64 bits | LDPC 码块（Codeblock）的物理层同步头。 |

---

## 2. 物理层与信道参数 (Physical Layer & Channel)

针对 LISA 场景的特定设置。

| 参数名       | 变量名                 | 推荐设置              | 备注                          |
|:--------- |:------------------- |:----------------- |:--------------------------- |
| **采样率**   | `fs`                | **100 MHz**       | 保证波形精度。                     |
| **伪码速率**  | `prn_rate`          | **3.125 Mcps**    | DSSS 扩频码速率。                 |
| **物理数据率** | `data_rate`         | **195.3125 kbps** | 扩频比 16。                     |
| **通信距离**  | `REAL_DISTANCE`     | **170,000 km**    | 决定光行时 $\tau \approx 0.57s$。 |
| **载波频率**  | `remote_laser_freq` | **281.95 THz**    | 1064 nm 激光。                 |
| **多普勒频偏** | `doppler`           | **2 MHz**         | 模拟卫星相对运动。                   |
| **调制方式**  | -                   | **BPSK**          | 相位调制。                       |

---

## 3. 编码与同步子层配置 (C&S Configuration)

| 参数名      | 变量名             | 推荐值            | 调优建议                                |
|:-------- |:--------------- |:-------------- |:----------------------------------- |
| **捕获序列** | `AcqSeqLen`     | **1024 bits**  | 在高频偏或低信噪比下，建议增加到 4096 以确保 PLL 锁定。   |
| **尾序列**  | `TailSeqLen`    | **128 bits**   | 确保最后数据移出译码器。                        |
| **帧间隙**  | `InterFrameGap` | **64 bits**    | 辅助接收机复位。                            |
| **同步门限** | `CSM_Threshold` | **4 ~ 8 bits** | 允许 CSM 出错的位数。推荐值 5。过低会导致漏检，过高会导致虚警。 |

---

## 4. 数据链路层配置 (Data Link Layer / COP-P)

针对长延迟链路的关键适配。

| 参数名        | 变量名                   | 推荐值             | 关键影响                                |
|:---------- |:--------------------- |:--------------- |:----------------------------------- |
| **最大帧长**   | `Max_Frame_Length`    | **2048 Bytes**  | 建议使用大帧以提升吞吐量效率。                     |
| **发送窗口**   | `Transmission_Window` | **64**          | 必须 $< 127$。推荐 64 以平衡吞吐量与重传代价。       |
| **ACK 超时** | `Synch_Timeout`       | **3.0 ~ 5.0 s** | **必须大于 RTT (1.14s)**。设太短会导致死锁或虚假重传。 |
| **呼叫超时**   | `Hail_Wait_Duration`  | **3.0 ~ 5.0 s** | 确保握手信号有足够时间往返。                      |
| **重传机制**   | -                     | **Go-Back-N**   | CCSDS 标准机制。在误码率 > 8% 时效率急剧下降。       |

---

## 5. 仿真控制参数 (Simulation Settings)

| 参数名       | 变量名              | 推荐值           | 作用                             |
|:--------- |:---------------- |:------------- |:------------------------------ |
| **物理分片**  | `PHY_CHUNK_SIZE` | **256 ~ 512** | 模拟硬件 FIFO 读取粒度，验证流式处理能力。       |
| **最小错误数** | `min_errors`     | **50 ~ 100**  | 蒙特卡洛仿真中 BER/FER 的统计置信度保障。      |
| **最大帧数**  | `max_frames`     | **10,000+**   | 仿真停止条件，确保覆盖低误码率区域 ($10^{-5}$)。 |

这份参数表完整地定义了您的仿真系统，既包含了**不可更改的标准规范**（如矩阵、多项式），也包含了**针对任务场景的工程配置**（如超时、窗口、速率）。
